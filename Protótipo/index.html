<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Minha Sala na UFSM</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a class="navbar-brand fw-bold d-flex align-items-center gap-2" href="#" onclick="showPage('home', event)"
        style="cursor:pointer;"><img src="UFSM_principal_cor.png" alt="UFSM" width="32" height="32"
          class="brand-logo" /><span>Minha Sala na UFSM</span></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link active" data-page="home" href="#" onclick="showPage('home', event)">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="agenda" href="#" onclick="showPage('agenda', event)">Calendário</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="cadastro" href="#" onclick="showPage('cadastro', event)">Cadastro de
              Salas</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="listarSalas" href="#" onclick="showPage('listarSalas', event)">Listar
              Salas</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" data-page="cadastroUsuario" href="#" onclick="showPage('cadastroUsuario', event)">
              Cadastro de Usuários
            </a>
          </li>
        </ul>
        <button class="btn btn-primary btn-sm" onclick="abrirLogin()">Login</button>
      </div>
    </div>
  </nav>

  <!-- Conteúdo -->
  <div class="container my-4">
    <!-- Página Home -->
    <div id="home" class="page">
      <section class="home-hero position-relative overflow-hidden rounded-4 p-4 p-md-5 mb-4">
        <img src="UFSM_principal_cor.png" class="home-watermark" alt="Marca d’água UFSM">
        <div class="row align-items-center g-4 position-relative">
          <div class="col-lg-7">
            <div class="d-inline-flex align-items-center gap-2 px-3 py-2 rounded-pill home-pill mb-3">
              <i class="bi bi-door-open"></i>
              <span>Sistema de agendamento de salas</span>
            </div>

            <h1 class="display-6 fw-bold text-white mb-3 home-title">
              Minha Sala na UFSM
            </h1>

            <p class="lead text-white-50 mb-4">
              Agende, organize e visualize reservas de forma rápida.
            </p>

            <div class="d-flex flex-wrap gap-2">
              <button class="btn btn-light btn-lg shadow-sm"
                onclick="showPage('agenda', { target: document.querySelector('[data-page=\'agenda\']') })">
                <i class="bi bi-calendar-week me-2"></i>Ir para o calendário
              </button>
            </div>

            <div class="text-white-50 small mt-3">
              <i class="bi bi-info-circle me-1"></i>
              Dica: filtre por tipo, bloco ou sala para encontrar o que você precisa mais rápido.
            </div>
          </div>

          <div class="col-lg-5">
            <div class="card border-0 shadow-lg rounded-4 home-float">
              <div class="card-body p-4">
                <h5 class="fw-bold mb-3">
                  <i class="bi bi-lightning-charge-fill me-2"></i>Atalhos
                </h5>

                <div class="d-grid gap-2">
                  <button class="btn btn-primary"
                    onclick="showPage('cadastro', { target: document.querySelector('[data-page=\'cadastro\']') })">
                    <i class="bi bi-plus-circle me-2"></i>Cadastrar sala
                  </button>

                  <button class="btn btn-outline-primary"
                    onclick="showPage('listarSalas', { target: document.querySelector('[data-page=\'listarSalas\']') })">
                    <i class="bi bi-list-task me-2"></i>Ver salas cadastradas
                  </button>

                  <button class="btn btn-outline-secondary" onclick="abrirLogin()">
                    <i class="bi bi-box-arrow-in-right me-2"></i>Login
                  </button>
                </div>

                <hr class="my-4">

                <div class="d-flex gap-3 align-items-start">
                  <div class="home-step-icon">
                    <i class="bi bi-1-circle-fill"></i>
                  </div>
                  <div>
                    <div class="fw-semibold">Escolha a semana</div>
                    <div class="text-muted small">Use as setas do calendário para navegar.</div>
                  </div>
                </div>

                <div class="d-flex gap-3 align-items-start mt-3">
                  <div class="home-step-icon">
                    <i class="bi bi-2-circle-fill"></i>
                  </div>
                  <div>
                    <div class="fw-semibold">Selecione a sala</div>
                    <div class="text-muted small">Filtre por bloco/tipo e selecione a sala desejada.</div>
                  </div>
                </div>

                <div class="d-flex gap-3 align-items-start mt-3">
                  <div class="home-step-icon">
                    <i class="bi bi-3-circle-fill"></i>
                  </div>
                  <div>
                    <div class="fw-semibold">Agende o horário</div>
                    <div class="text-muted small">O sistema bloqueia conflitos automaticamente.</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </section>

      <div class="row g-3 g-md-4 justify-content-center">
        <div class="col-12 col-md-6 col-lg-5">
          <div class="card h-100 border-0 shadow-sm rounded-4 home-card">
            <div class="card-body p-4 d-flex flex-column">
              <div class="home-card-icon mb-3"><i class="bi bi-person-plus"></i></div>
              <h5 class="fw-bold">Cadastrar usuário</h5>
              <p class="text-muted mb-4">Crie usuários para acessar e operar o sistema.</p>
              <button class="btn btn-primary w-100 mt-auto" type="button"
                onclick="showPage('cadastroUsuario', { target: document.querySelector('[data-page=\'cadastroUsuario\']') })">Cadastrar
                usuário
              </button>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-6 col-lg-5">
          <div class="card h-100 border-0 shadow-sm rounded-4 home-card">
            <div class="card-body p-4 d-flex flex-column">
              <div class="home-card-icon mb-3"><i class="bi bi-card-list"></i></div>
              <h5 class="fw-bold">Lista de salas</h5>
              <p class="text-muted mb-4">Consulte, edite e exclua salas cadastradas.</p>
              <button class="btn btn-outline-secondary w-100 mt-auto"
                onclick="showPage('listarSalas', { target: document.querySelector('[data-page=\'listarSalas\']') })">
                Ver salas cadastradas
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Página Agendamento -->
    <div id="agenda" class="page" style="display:none;">
      <h2 class="mb-3">Calendário Semanal</h2>

      <!-- BARRA SUPERIOR: Semana (esq) + Filtro (dir) -->
      <div class="week-bar mb-2">
        <!-- Esquerda: navegação de semana -->
        <div class="week-nav">
          <button id="prevWeek" class="btn btn-outline-secondary btn-sm" aria-label="Semana anterior">‹</button>
          <button id="weekLabel" class="btn btn-link week-label" type="button" title="Selecionar semana">
            <!-- ex.: 26 OUT até 01 NOV -->
          </button>
          <input id="weekPicker" type="date" class="visually-hidden" aria-hidden="true" />
          <button id="nextWeek" class="btn btn-outline-secondary btn-sm" aria-label="Próxima semana">›</button>
        </div>

        <!-- Direita: filtro por Tipo/Bloco/Sala -->
        <div class="week-filter">
          <select id="filtroTipo" class="form-select form-select-sm">
            <option value="">Tipo</option>
            <option value="laboratorio">Laboratório</option>
            <option value="sala">Sala de Aula</option>
            <option value="auditorio">Auditório</option>
          </select>

          <select id="filtroBloco" class="form-select form-select-sm">
            <option value="">Bloco</option>
            <option value="A">Bloco A</option>
            <option value="B">Bloco B</option>
            <option value="C">Bloco C</option>
            <option value="D">Bloco D</option>
            <option value="E">Bloco E</option>
            <option value="F">Bloco F</option>
            <option value="G">Bloco G</option>
          </select>

          <select id="filtroSala" class="form-select form-select-sm">
            <option value="">Sala</option>
          </select>

          <button id="btnAplicarFiltro" class="btn btn-primary btn-sm">Filtrar</button>
        </div>
      </div>

      <div class="calendar" id="calendar"></div>

      <!-- LEGENDA -->
      <div id="legendProfessores" class="legend mt-3"></div>
    </div>

    <!-- Página Cadastro -->
    <div id="cadastro" class="page" style="display:none;">
      <h2 class="mb-3">Cadastro de Salas</h2>
      <form id="formCadastroSala" class="row g-3">
        <div class="col-md-6">
          <label class="form-label" for="tipoCadastro">Tipo de Sala</label>
          <select id="tipoCadastro" class="form-select" required>
            <option value="sala">Sala de Aula</option>
            <option value="laboratorio">Laboratório</option>
            <option value="auditorio">Auditório</option>
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label" for="blocoCadastro">Bloco</label>
          <select id="blocoCadastro" class="form-select" required>
            <option value="A">Bloco A</option>
            <option value="B">Bloco B</option>
            <option value="C">Bloco C</option>
            <option value="D">Bloco D</option>
            <option value="E">Bloco E</option>
            <option value="F">Bloco F</option>
            <option value="G">Bloco G</option>
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label" for="nomeSala">Nome da Sala</label>
          <input id="nomeSala" type="text" class="form-control" placeholder="Ex.: Lab 01" required>
        </div>
        <div class="col-md-6">
          <label class="form-label" for="capacidade">Capacidade</label>
          <input id="capacidade" type="number" class="form-control" min="1" value="30" required>
        </div>

        <div class="col-12">
          <button class="btn btn-primary" type="submit">Salvar</button>
        </div>
      </form>
    </div>

    <!-- Página Listar Salas -->
    <div id="listarSalas" class="page" style="display:none;">
      <h2 class="mb-3">Salas Cadastradas</h2>
      <table class="table table-striped" id="tabelaSalas">
        <thead>
          <tr>
            <th>Tipo</th>
            <th>Bloco</th>
            <th>Nome</th>
            <th>Capacidade</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <!-- via JS -->
        </tbody>
      </table>
    </div>

    <!-- Página Cadastro de Usuários -->
    <div id="cadastroUsuario" class="page" style="display:none;">
      <h2 class="mb-3">Cadastro de Usuários</h2>
      <p class="text-muted">
        Cadastre usuários para acessar o sistema (ex.: admin, professor, etc.).
      </p>

      <form id="formCadastroUsuario" class="row g-3">
        <div class="col-md-6">
          <label class="form-label" for="nomeUsuario">Nome completo</label>
          <input id="nomeUsuario" type="text" class="form-control" placeholder="Ex.: João da Silva" required>
        </div>

        <div class="col-md-6">
          <label class="form-label" for="emailUsuario">E-mail</label>
          <input id="emailUsuario" type="email" class="form-control" placeholder="exemplo@ufsm.br" required>
        </div>

        <div class="col-md-6">
          <label class="form-label" for="loginUsuario">Usuário (login)</label>
          <input id="loginUsuario" type="text" class="form-control" placeholder="Ex.: joao.silva" required>
          <div class="form-text">Sem espaços</div>
        </div>

        <div class="col-md-6">
          <label class="form-label" for="perfilUsuario">Perfil</label>
          <select id="perfilUsuario" class="form-select" required>
            <option value="" selected disabled>Selecione</option>
            <option value="admin">Administrador</option>
            <option value="professor">Professor</option>
            <option value="operador">Operador</option>
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label" for="senhaUsuario">Senha</label>
          <input id="senhaUsuario" type="password" class="form-control" minlength="6" required>
          <div class="form-text">Mínimo de 6 caracteres.</div>
        </div>

        <div class="col-md-6">
          <label class="form-label" for="confirmarSenhaUsuario">Confirmar senha</label>
          <input id="confirmarSenhaUsuario" type="password" class="form-control" minlength="6" required>
        </div>

        <div class="col-12">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="ativoUsuario" checked>
            <label class="form-check-label" for="ativoUsuario">Usuário ativo</label>
          </div>
        </div>

        <div class="col-12 d-flex gap-2">
          <button class="btn btn-primary" type="submit">
            <i class="bi bi-check2-circle me-1"></i>Salvar usuário
          </button>
          <button class="btn btn-outline-secondary" type="reset">
            <i class="bi bi-eraser me-1"></i>Limpar
          </button>
        </div>
      </form>

      <hr class="my-4">

      <div class="d-flex align-items-center justify-content-between mb-2">
        <h5 class="mb-0">Usuários cadastrados</h5>
      </div>

      <div class="table-responsive">
        <table class="table table-striped align-middle" id="tabelaUsuarios">
          <thead>
            <tr>
              <th>Nome</th>
              <th>E-mail</th>
              <th>Login</th>
              <th>Perfil</th>
              <th>Status</th>
              <th class="text-end">Ações</th>
            </tr>
          </thead>
          <tbody>
            <!-- via JS -->
          </tbody>
        </table>
      </div>
    </div>

  </div>

  <!-- Footer -->
  <footer class="site-footer mt-5">
    <div class="container py-4">
      <div class="row g-3 align-items-center">
        <div class="col-md-6 d-flex align-items-center gap-2">
          <img src="UFSM_principal_cor.png" alt="UFSM" width="28" height="28" class="opacity-75">
          <div>
            <div class="fw-semibold">Minha Sala na UFSM</div>
            <div class="small text-muted">Trabalho final • Sistema de agendamento de salas</div>
          </div>
        </div>

        <div class="col-md-6 text-md-end small text-muted">
          <span class="me-2"><i class="bi bi-shield-check"></i> Evita conflitos automaticamente</span>
          <span>© 2025</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Modal Agendar -->
  <div class="modal fade" id="modalAgendar" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Agendar Sala</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="formAgendar">
            <div class="row g-2">
              <div class="col-6">
                <label class="form-label" for="tipoSala">Tipo de Sala</label>
                <select id="tipoSala" class="form-select" required>
                  <option value="">Selecione</option>
                  <option value="laboratorio">Laboratório</option>
                  <option value="sala">Sala de Aula</option>
                  <option value="auditorio">Auditório</option>
                </select>
              </div>
              <div class="col-6">
                <label class="form-label" for="blocoSala">Bloco</label>
                <select id="blocoSala" class="form-select" required>
                  <option value="">Selecione</option>
                  <option value="A">Bloco A</option>
                  <option value="B">Bloco B</option>
                  <option value="C">Bloco C</option>
                  <option value="D">Bloco D</option>
                  <option value="E">Bloco E</option>
                  <option value="F">Bloco F</option>
                  <option value="G">Bloco G</option>
                </select>
              </div>

              <div class="col-12">
                <label class="form-label" for="sala">Sala</label>
                <select id="sala" class="form-select" required>
                  <option>Selecione tipo e bloco</option>
                </select>
              </div>

              <!-- Intervalo livre -->
              <input type="hidden" id="modalDia" value="">
              <div class="col-6">
                <label class="form-label" for="horaInicio">Início</label>
                <input id="horaInicio" type="time" class="form-control" step="3600" min="08:00" max="22:00" required>
              </div>
              <div class="col-6">
                <label class="form-label" for="horaFim">Fim</label>
                <input id="horaFim" type="time" class="form-control" step="3600" min="09:00" max="23:00" required>
              </div>
              <div class="form-text px-2">
                Dica: para “dia todo”, selecione 08:00 até 22:00.
              </div>

              <div class="col-12">
                <label class="form-label" for="professor">Professor</label>
                <select id="professor" class="form-select" required>
                  <option value="">Selecione</option>
                  <option value="Henry">Profª. Henry</option>
                  <option value="Bruno">Prof. Bruno</option>
                  <option value="Daniel">Profª. Daniel</option>
                  <option value="Alencar">Prof. Alencar</option>
                </select>
              </div>

              <div class="col-12">
                <label class="form-label" for="repeatMode">Repetir</label>
                <select id="repeatMode" class="form-select">
                  <option value="none" selected>Nunca</option>
                  <option value="weekly">Semanalmente</option>
                  <option value="monthly">Mensalmente</option>
                </select>
              </div>

            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="confirmarAgendamento">Confirmar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Sem Salas -->
  <div class="modal fade" id="modalSemSalas" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-warning">
          <h5 class="modal-title">Atenção</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          Não há salas para o tipo/bloco selecionados.
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button class="btn btn-primary" onclick="abrirCadastroDoModalSemSalas()">Cadastrar Sala</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Login -->
  <div class="modal fade" id="modalLogin" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">Login</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="formLogin">
            <div class="mb-3">
              <label for="usuario" class="form-label">Usuário</label>
              <input type="text" class="form-control" id="usuario" required>
            </div>
            <div class="mb-3">
              <label for="senha" class="form-label">Senha</label>
              <input type="password" class="form-control" id="senha" required>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button class="btn btn-primary" onclick="logar()">Entrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
</body>

</html>
